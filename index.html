<!doctype html>
<html lang="en" data-theme="light">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>BrunKala â€” Crochet & Art</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Montserrat:wght@300;400;500;600&family=Parisienne&display=swap"
    rel="stylesheet">

  <style>
    :root {
      --bg: #FFFCF5;
      --paper: #F4F1E8;
      --paper2: #EFE9E4;
      --ink: #5E5343;
      --stroke: rgba(94, 83, 67, .15);
      --glass: rgba(255, 252, 245, .85);
      --shadow: 0 24px 64px -12px rgba(94, 83, 67, .18);
      --shadow2: 0 32px 80px -16px rgba(94, 83, 67, .22);
      --lift: 0 14px 42px -10px rgba(94, 83, 67, .22);
      --radius: 24px;
      --serif: "DM Serif Display", serif;
      --script: "Parisienne", cursive;
      --sans: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial;
      --max: 1100px;
      --ease: cubic-bezier(.2, .8, .2, 1);
      --bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
      /* String-like spring */
    }

    html[data-theme="dark"] {
      --bg: #12100f;
      --paper: #1B1714;
      --paper2: #241F19;
      --ink: #F4F1E8;
      --stroke: rgba(244, 241, 232, .12);
      --glass: rgba(18, 16, 15, .75);
      --shadow: 0 24px 72px -12px rgba(0, 0, 0, .45);
      --shadow2: 0 32px 88px -12px rgba(0, 0, 0, .55);
      --lift: 0 18px 52px -10px rgba(0, 0, 0, .5);
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: var(--sans);
      color: var(--ink);
      background: var(--bg);
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      overflow-anchor: none;
    }

    a {
      color: inherit;
      text-decoration: none
    }

    img {
      max-width: 100%;
      display: block
    }

    /* ===== Premium background ===== */
    .bg {
      position: fixed;
      inset: 0;
      z-index: -4;
      pointer-events: none;
      overflow: hidden;
    }

    .bg::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(950px 700px at 12% 10%, rgba(239, 233, 228, .95), transparent 60%),
        radial-gradient(900px 700px at 90% 20%, rgba(244, 241, 232, .82), transparent 62%),
        radial-gradient(1200px 800px at 55% 92%, rgba(239, 233, 228, .62), transparent 64%),
        linear-gradient(120deg, rgba(255, 252, 245, 0), rgba(244, 241, 232, .35), rgba(255, 252, 245, 0));
      animation: wash 12s var(--ease) infinite alternate;
      transform: translate3d(0, 0, 0);
    }

    html[data-theme="dark"] .bg::before {
      background:
        radial-gradient(950px 700px at 12% 10%, rgba(244, 241, 232, .08), transparent 60%),
        radial-gradient(900px 700px at 90% 20%, rgba(244, 241, 232, .05), transparent 62%),
        radial-gradient(1200px 800px at 55% 92%, rgba(239, 233, 228, .04), transparent 64%),
        linear-gradient(120deg, rgba(18, 16, 15, 0), rgba(244, 241, 232, .03), rgba(18, 16, 15, 0));
    }

    @keyframes wash {
      0% {
        transform: translate(-1.6%, -1.2%) scale(1)
      }

      100% {
        transform: translate(1.4%, 1.2%) scale(1.05)
      }
    }

    .ribbons {
      position: absolute;
      inset: -20%;
      background:
        radial-gradient(650px 220px at 20% 30%, rgba(94, 83, 67, .07), transparent 65%),
        radial-gradient(760px 240px at 80% 42%, rgba(94, 83, 67, .06), transparent 65%);
      filter: blur(24px);
      opacity: .85;
      animation: ribbons 10s var(--ease) infinite alternate;
    }

    html[data-theme="dark"] .ribbons {
      background:
        radial-gradient(650px 220px at 20% 30%, rgba(244, 241, 232, .04), transparent 65%),
        radial-gradient(760px 240px at 80% 42%, rgba(244, 241, 232, .03), transparent 65%);
      opacity: .60;
    }

    @keyframes ribbons {
      0% {
        transform: translate(-1%, 0%) rotate(-2deg)
      }

      100% {
        transform: translate(-.5%, 2%) rotate(-1deg)
      }
    }

    /* background video (optional bg.mp4) */
    .bg video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: .14;
      filter: saturate(.9) contrast(.95) blur(.5px);
      transform: scale(1.06);
      display: none;
    }

    html[data-theme="dark"] .bg video {
      opacity: .16
    }

    .grain {
      position: fixed;
      inset: 0;
      z-index: -3;
      pointer-events: none;
      opacity: .05;
      mix-blend-mode: multiply;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      background-size: 180px 180px;
      animation: grainMove 6s steps(6) infinite;
    }

    html[data-theme="dark"] .grain {
      opacity: .04;
      mix-blend-mode: screen;
    }

    @keyframes grainMove {
      0% {
        transform: translate(0, 0)
      }

      20% {
        transform: translate(-2%, 1%)
      }

      40% {
        transform: translate(2%, -1%)
      }

      60% {
        transform: translate(-1%, 2%)
      }

      80% {
        transform: translate(1%, -2%)
      }

      100% {
        transform: translate(0, 0)
      }
    }

    #particles {
      position: fixed;
      inset: 0;
      z-index: -2;
      pointer-events: none;
      opacity: .5;
    }

    html[data-theme="dark"] #particles {
      opacity: .35;
    }

    /* ===== Layout ===== */
    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 16px 86px;
      overflow-anchor: none;
    }

    .topbar {
      position: sticky;
      top: 12px;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 12px 16px;
      margin: 8px 0 18px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: var(--glass);
      backdrop-filter: blur(20px) saturate(160%);
      box-shadow: 0 16px 40px -10px rgba(94, 83, 67, .12);
      transition: transform .3s var(--ease);
    }

    html[data-theme="dark"] .topbar {
      box-shadow: 0 18px 46px -10px rgba(0, 0, 0, .45);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
      min-width: 0;
    }

    .logoImg {
      width: 52px;
      height: 52px;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(244, 241, 232, .6);
      object-fit: contain;
      padding: 6px;
      box-shadow: 0 8px 20px rgba(94, 83, 67, .08);
      flex: 0 0 auto;
    }

    html[data-theme="dark"] .logoImg {
      background: #fff;
      border-color: rgba(244, 241, 232, .2);
    }

    .wordmark {
      display: flex;
      flex-direction: column;
      line-height: 1.05;
      min-width: 0;
    }

    .wordmark .name {
      font-family: var(--serif);
      font-size: 24px;
      letter-spacing: .5px;
      white-space: nowrap;
    }

    .wordmark .tag {
      font-family: var(--script);
      font-size: 16px;
      opacity: .85;
      white-space: nowrap;
    }

    .toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      border: 1px solid var(--stroke);
      background: rgba(244, 241, 232, .5);
      padding: 6px 8px 6px 12px;
      border-radius: 999px;
      user-select: none;
      flex: 0 0 auto;
    }

    html[data-theme="dark"] .toggle {
      background: rgba(34, 30, 25, .5);
    }

    .themeText {
      font-size: 11px;
      font-weight: 700;
      opacity: .8;
      letter-spacing: .02em;
      text-transform: uppercase;
    }

    .switch {
      width: 42px;
      height: 24px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(94, 83, 67, .12);
      position: relative;
      cursor: pointer;
      transition: background .2s;
    }

    html[data-theme="dark"] .switch {
      background: rgba(244, 241, 232, .12);
    }

    .knob {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: transform .4s var(--bounce);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
    }

    html[data-theme="dark"] .knob {
      transform: translateX(18px);
      background: #f4f1e8;
    }

    /* ===== Hero ===== */
    .hero {
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(244, 241, 232, .85), rgba(239, 233, 228, .65));
      box-shadow: var(--shadow);
      padding: 24px;
      overflow: hidden;
      position: relative;
      backdrop-filter: blur(10px);
    }

    html[data-theme="dark"] .hero {
      background: linear-gradient(180deg, rgba(34, 30, 25, .75), rgba(27, 23, 20, .60));
    }

    .heroGrid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 24px;
      align-items: start;
    }

    .headline {
      font-family: var(--serif);
      font-size: 42px;
      line-height: 1.05;
      margin: 0 0 12px;
      letter-spacing: -0.5px;
    }

    .sub {
      margin: 0;
      font-size: 15px;
      line-height: 1.65;
      opacity: .85;
      max-width: 55ch;
    }

    .ctaRow {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .btn {
      border: 1px solid var(--stroke);
      background: rgba(255, 252, 245, .85);
      padding: 14px 20px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 24px -6px rgba(94, 83, 67, .12);
      transition: transform .4s var(--bounce), box-shadow .3s ease, background .2s;
      cursor: pointer;
      text-transform: capitalize;
    }

    html[data-theme="dark"] .btn {
      background: rgba(38, 34, 30, .6);
      box-shadow: 0 12px 30px -8px rgba(0, 0, 0, .35);
    }

    .btn.primary {
      background: var(--ink);
      border-color: var(--ink);
      color: var(--bg);
      box-shadow: 0 12px 32px -8px rgba(94, 83, 67, .3);
    }

    html[data-theme="dark"] .btn.primary {
      background: #E8E4D8;
      color: #12100f;
      border-color: #E8E4D8;
      box-shadow: 0 14px 36px -8px rgba(232, 228, 216, .25);
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn:active {
      transform: translateY(1px) scale(.96);
    }

    .sideStack {
      display: grid;
      gap: 16px;
    }

    .panel {
      border-radius: calc(var(--radius) - 4px);
      border: 1px solid var(--stroke);
      background: rgba(255, 252, 245, .5);
      box-shadow: 0 12px 36px -8px rgba(94, 83, 67, .08);
      padding: 20px;
      backdrop-filter: blur(8px);
    }

    html[data-theme="dark"] .panel {
      background: rgba(18, 16, 15, .4);
      box-shadow: 0 16px 40px -8px rgba(0, 0, 0, .25);
    }

    .creator {
      display: flex;
      gap: 16px;
      align-items: center;
    }

    .avatar {
      width: 72px;
      height: 72px;
      border-radius: 24px;
      object-fit: cover;
      border: 1px solid var(--stroke);
      background: rgba(244, 241, 232, .6);
      padding: 2px;
    }

    .creator h3 {
      margin: 0;
      font-family: var(--serif);
      font-size: 20px;
      line-height: 1.2;
    }

    .creator p {
      margin: 4px 0 0;
      font-size: 13px;
      opacity: .8;
      line-height: 1.4;
    }

    .miniTitle {
      font-family: var(--script);
      font-size: 24px;
      margin: 0 0 16px;
      opacity: .85;
      text-align: center;
    }

    .stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .stat {
      border-radius: 16px;
      border: 1px solid rgba(94, 83, 67, .1);
      background: rgba(244, 241, 232, .4);
      padding: 12px;
      text-align: center;
    }

    html[data-theme="dark"] .stat {
      border-color: rgba(244, 241, 232, .08);
      background: rgba(34, 30, 25, .4);
    }

    .stat b {
      display: block;
      font-size: 16px;
      margin-bottom: 4px;
    }

    .stat span {
      display: block;
      font-size: 12px;
      opacity: .75;
    }

    /* ===== Portfolio ===== */
    .section {
      margin-top: 32px;
      padding-top: 10px;
    }

    .sectionHead {
      display: flex;
      align-items: end;
      justify-content: space-between;
      gap: 16px;
      margin: 0 8px 16px;
    }

    .sectionHead h2 {
      margin: 0;
      font-family: var(--serif);
      font-size: 28px;
    }

    .sectionHead .subNote {
      margin: 0;
      font-size: 13px;
      opacity: .7;
    }

    .arrows {
      display: flex;
      gap: 10px;
    }

    .arrowBtn {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: 1px solid var(--stroke);
      background: rgba(255, 252, 245, .6);
      backdrop-filter: blur(4px);
      box-shadow: 0 8px 20px rgba(94, 83, 67, .08);
      display: grid;
      place-items: center;
      font-size: 20px;
      cursor: pointer;
      transition: all .3s var(--ease);
    }

    html[data-theme="dark"] .arrowBtn {
      background: rgba(30, 26, 22, .6);
      box-shadow: 0 12px 28px rgba(0, 0, 0, .25);
    }

    .arrowBtn:hover {
      transform: scale(1.1);
      background: var(--bg);
    }

    .arrowBtn:active {
      transform: scale(.95);
    }

    .strip {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding: 10px 4px 24px;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      mask-image: linear-gradient(90deg, transparent 0%, black 2%, black 98%, transparent 100%);
    }

    .strip::-webkit-scrollbar {
      display: none
    }

    .tile {
      flex: 0 0 auto;
      width: 75%;
      max-width: 300px;
      scroll-snap-align: center;
      border-radius: 20px;
      border: 1px solid var(--stroke);
      background: rgba(255, 252, 245, .5);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      transition: transform .4s var(--bounce), box-shadow .4s var(--ease);
      cursor: zoom-in;
    }

    html[data-theme="dark"] .tile {
      background: rgba(26, 22, 20, .5);
    }

    .tile:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--lift);
      border-color: var(--ink);
    }

    .tileImg {
      width: 100%;
      aspect-ratio: 1 / 1.05;
      object-fit: cover;
      background: rgba(244, 241, 232, .5);
      transition: opacity .3s;
    }

    .tileBody {
      padding: 14px 16px 18px;
    }

    .tileTitle {
      margin: 0 0 6px;
      font-size: 16px;
      font-weight: 600;
      font-family: var(--serif);
      letter-spacing: .3px;
    }

    .meta {
      display: flex;
      gap: 8px;
      font-size: 12px;
      opacity: .75;
    }

    .badge {
      position: absolute;
      top: 12px;
      left: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1px;
      border: 1px solid var(--stroke);
      background: rgba(255, 252, 245, .9);
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .06);
    }

    html[data-theme="dark"] .badge {
      background: rgba(18, 16, 15, .85);
    }

    /* ===== Footer ===== */
    .footer {
      margin-top: 40px;
      padding: 32px;
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background: rgba(244, 241, 232, .6);
      box-shadow: var(--shadow);
      text-align: center;
    }

    html[data-theme="dark"] .footer {
      background: rgba(34, 30, 25, .4);
      box-shadow: var(--shadow2);
    }

    .footer h3 {
      font-size: 26px;
      margin-bottom: 12px;
    }

    .footer p {
      max-width: 600px;
      margin: 0 auto;
      opacity: .8;
      font-size: 15px;
    }

    .links {
      justify-content: center;
      margin-top: 24px;
    }

    /* ===== LIGHTBOX ===== */
    .lightbox {
      position: fixed;
      inset: 0;
      z-index: 2000;
      background: rgba(244, 241, 232, .85);
      backdrop-filter: blur(16px) saturate(140%);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity .4s var(--ease);
      padding: 24px;
    }

    html[data-theme="dark"] .lightbox {
      background: rgba(10, 8, 7, .85);
    }

    .lightbox.active {
      opacity: 1;
      pointer-events: all;
    }

    .lightboxContent {
      position: relative;
      max-width: 90%;
      max-height: 85%;
      border-radius: 28px;
      box-shadow: 0 40px 100px -12px rgba(0, 0, 0, .35);
      transform: scale(0.9) translateY(20px);
      transition: transform .6s var(--bounce);
      background: var(--bg);
      padding: 8px;
      border: 1px solid var(--stroke);
    }

    .lightbox.active .lightboxContent {
      transform: scale(1) translateY(0);
    }

    .lightboxImg {
      display: block;
      max-width: 100%;
      max-height: 80vh;
      border-radius: 20px;
      object-fit: contain;
    }

    .closeBtn {
      position: absolute;
      top: -20px;
      right: -20px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--ink);
      color: var(--bg);
      border: none;
      font-size: 24px;
      display: grid;
      place-items: center;
      cursor: pointer;
      box-shadow: 0 12px 32px rgba(0, 0, 0, .25);
      transform: scale(0);
      transition: transform .4s var(--bounce) .1s;
    }

    .lightbox.active .closeBtn {
      transform: scale(1);
    }

    .closeBtn:hover {
      transform: scale(1.1) rotate(90deg);
    }

    /* Animation Utils */
    .reveal {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity .8s var(--ease), transform .8s var(--ease);
    }

    .reveal.show {
      opacity: 1;
      transform: translateY(0);
    }

    @media (min-width: 860px) {
      .wrap {
        padding: 24px 24px 80px
      }

      .hero {
        padding: 40px
      }

      .heroGrid {
        grid-template-columns: 1.2fr .8fr;
        gap: 40px
      }

      .headline {
        font-size: 56px
      }

      .logoImg {
        width: 64px;
        height: 64px
      }

      .tile {
        width: 340px;
      }
    }

    @media (prefers-reduced-motion: reduce) {

      .reveal,
      .lightbox,
      .lightboxContent,
      .closeBtn,
      .btn,
      .tile {
        transition: none !important;
        animation: none !important;
      }

      .knob {
        transition: none !important;
      }
    }
  </style>

</head>

<body>
  <div class="bg" aria-hidden="true">
    <div class="ribbons"></div>
    <video id="bgVideo" autoplay muted loop playsinline></video>
  </div>
  <div class="grain" aria-hidden="true"></div>
  <canvas id="particles" aria-hidden="true"></canvas>

  <div class="wrap">
    <header class="topbar reveal show" id="topbar">
      <div class="brand">
        <img class="logoImg" src="images/logo.png" alt="BrunKala logo">
        <div class="wordmark">
          <div class="name">BrunKala</div>
          <div class="tag">crochet â€¢ paintings â€¢ handmade</div>
        </div>
      </div>

      <div class="toggle" role="group" aria-label="Theme toggle">
        <span class="themeText" id="themeState">Light</span>
        <div class="switch" id="themeSwitch" role="switch" aria-label="Toggle theme" aria-checked="false" tabindex="0">
          <div class="knob"></div>
        </div>
      </div>
    </header>

    <section class="hero reveal show" id="home">
      <div class="heroGrid">
        <div class="reveal show">
          <h1 class="headline">A soft, handmade world â€” made by me âœ¨</h1>
          <p class="sub">
            Crochet pieces & paintings crafted with calm colors and tiny details.
            Browse my work below â€” for orders, I currently take them through Instagram DM.
          </p>

          <div class="ctaRow">
            <a class="btn primary" href="https://ig.me/m/bru.n.kala" target="_blank" rel="noreferrer">DM to order
              (Instagram)</a>
            <a class="btn" href="https://www.instagram.com/bru.n.kala?igsh=ZGozeXRtZnpvaGxp&utm_source=qr"
              target="_blank" rel="noreferrer">Instagram</a>
            <a class="btn" href="https://youtube.com/@bruandkala?si=n5VPnbCkMmiKOGE8" target="_blank"
              rel="noreferrer">YouTube</a>
          </div>
        </div>

        <div class="sideStack">
          <div class="panel creator reveal">
            <img class="avatar" src="images/profile.jpg" alt="Creator photo">
            <div>
              <h3>Hi, Iâ€™m the creator âœ¿</h3>
              <p>
                I make crochet pieces (bunny, teddy, hearts, sling bags) and paintings.
                If you want something similar, DM me â€” custom colors are possible.
              </p>
            </div>
          </div>

          <div class="panel reveal">
            <p class="miniTitle">Quick info</p>
            <div class="stats">
              <div class="stat"><b>Orders</b><span>Instagram DM only</span></div>
              <div class="stat"><b>Custom</b><span>colors & small changes</span></div>
              <div class="stat"><b>Handmade</b><span>every piece unique</span></div>
              <div class="stat"><b>Delivery</b><span>India</span></div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <div id="portfolio"></div>

    <section class="footer reveal" id="order">
      <h3>Want to order something?</h3>
      <p>
        <b>As of now, I take all orders through Instagram DM.</b> I currently deliver within <b>India</b> ðŸ‡®ðŸ‡³
        A new website for easy ordering is <b>coming soon</b> â€” till then DM me with:
        <b>item name</b> + <b>color preference</b> + <b>city</b>.
      </p>

      <div class="links">
        <a class="btn primary" href="https://ig.me/m/bru.n.kala" target="_blank" rel="noreferrer">DM to order</a>
        <a class="btn" href="https://www.instagram.com/bru.n.kala?igsh=ZGozeXRtZnpvaGxp&utm_source=qr" target="_blank"
          rel="noreferrer">Instagram</a>
        <a class="btn" href="https://youtube.com/@bruandkala?si=n5VPnbCkMmiKOGE8" target="_blank"
          rel="noreferrer">YouTube</a>
      </div>

      <p style="font-size:12px;opacity:.85;margin-top:10px;">
        BrunKala â€¢ handmade crochet & art
      </p>
    </section>
  </div>

  <!-- Lightbox DOM -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lightboxContent">
      <button class="closeBtn" aria-label="Close image">Ã—</button>
      <img id="lightboxImg" class="lightboxImg" src="" alt="">
    </div>
  </div>

  <script>
    /* ========= RELOAD FIX (Scroll to Top) ========= */
    if (history.scrollRestoration) history.scrollRestoration = 'manual';

    function resetScroll() {
      window.scrollTo(0, 0);
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }

    // Force scroll to top on load and unload
    window.addEventListener('beforeunload', resetScroll);
    window.addEventListener('load', () => { setTimeout(resetScroll, 20); });
    resetScroll(); // Immediate call

    /* ========= THEME LOGIC ========= */
    const root = document.documentElement;
    const switchEl = document.getElementById("themeSwitch");
    const themeState = document.getElementById("themeState");
    const storedTheme = localStorage.getItem("brunkala_theme");

    function applyTheme(theme) {
      root.setAttribute("data-theme", theme);
      switchEl.setAttribute("aria-checked", theme === "dark");
      themeState.textContent = theme === "dark" ? "Dark" : "Light";
      localStorage.setItem("brunkala_theme", theme);
    }
    // Default to light if no preference
    applyTheme(storedTheme || "light");

    switchEl.addEventListener("click", () => {
      const cur = root.getAttribute("data-theme");
      applyTheme(cur === "dark" ? "light" : "dark");
    });
    switchEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") switchEl.click();
    });

    /* ========= LIGHTBOX LOGIC ========= */
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightboxImg');
    const closeBtn = document.querySelector('.closeBtn');

    function openLightbox(src) {
      lbImg.src = src;
      lightbox.classList.add('active');
      lightbox.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden'; // Lock scroll
    }

    function closeLightbox() {
      lightbox.classList.remove('active');
      lightbox.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = ''; // Unlock scroll
      setTimeout(() => { lbImg.src = ''; }, 400); // Clear after anim
    }

    closeBtn.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && lightbox.classList.contains('active')) closeLightbox();
    });

    /* ========= DATA & RENDERING ========= */
    const sections = [
      { title: "Sling Bags", badge: "CROCHET", prefix: "bag-", count: 2 },
      { title: "Bunny", badge: "CROCHET", prefix: "bunny-single-", count: 2 },
      { title: "Mat cum Rose Bouquet", badge: "CROCHET", prefix: "bouquet-", count: 3 },
      { title: "Bunny + Heart", badge: "CROCHET", files: ["images/bunny-heart-simple-01.jpg"] },
      { title: "Simple Heart", badge: "CROCHET", files: ["images/heart-01.jpg"] },
      { title: "Bunny + Rose Stem", badge: "CROCHET", prefix: "bunny-heart-rose-", count: 2 },
      { title: "Tortoise", badge: "CROCHET", prefix: "tortoise-", count: 3 },
      { title: "Teddy", badge: "CROCHET", files: ["images/teddy-01.jpg"] },
      { title: "Drawings", badge: "ART", prefix: "drawing-", count: 10 },
      { title: "Packaging", badge: "PACK", prefix: "packaging-", count: 3 },
    ];

    function getFiles(s) {
      if (s.files) return s.files;
      return Array.from({ length: s.count }, (_, i) => `images/${s.prefix}${String(i + 1).padStart(2, '0')}.jpg`);
    }

    const portfolio = document.getElementById("portfolio");
    const io = new IntersectionObserver(ents => {
      ents.forEach(e => { if (e.isIntersecting) e.target.classList.add('show'); })
    }, { threshold: 0.1 });

    sections.forEach((s, idx) => {
      const files = getFiles(s);
      const sec = document.createElement("section");
      sec.className = "section reveal";

      const stripId = `strip-${idx}`;

      sec.innerHTML = `
        <div class="sectionHead">
          <div>
            <h2>${s.title}</h2>
            <p class="subNote">${files.length} items â€¢ Swipe or use arrows</p>
          </div>
          <div class="arrows">
            <button class="arrowBtn" onclick="scrollStrip('${stripId}', -1)">â€¹</button>
            <button class="arrowBtn" onclick="scrollStrip('${stripId}', 1)">â€º</button>
          </div>
        </div>
        <div class="strip" id="${stripId}">
          ${files.map((f, i) => `
            <div class="tile" onclick="openLightbox('${f}')">
              <div class="badge">${s.badge}</div>
              <img class="tileImg" src="${f}" alt="${s.title}" loading="lazy">
              <div class="tileBody">
                 <p class="tileTitle">${s.title}</p>
                 <div class="meta">Item ${i + 1}</div>
              </div>
            </div>
          `).join('')}
        </div>
      `;
      portfolio.appendChild(sec);
      io.observe(sec);
    });

    window.scrollStrip = function (id, dir) {
      const el = document.getElementById(id);
      const amount = el.clientWidth * 0.7;
      el.scrollBy({ left: amount * dir, behavior: 'smooth' });
    }

    /* ========= VISUAL EFFECTS ========= */
    // Parallax
    window.addEventListener('scroll', () => {
      if (window.innerWidth < 800) return;
      document.body.style.setProperty('--parY', window.scrollY + "px");
    }, { passive: true });

    // Reveal Header & Hero
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    setTimeout(() => {
      document.getElementById('topbar').classList.add('show');
      document.getElementById('home').classList.add('show');
    }, 100);

    /* ========= PARTICLES (Interactive Thread Network) ========= */
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d", { alpha: true });

    let W, H, dpr;
    let mouse = { x: -100, y: -100 };

    function resize() {
      dpr = Math.min(window.devicePixelRatio || 1, 2);
      W = canvas.width = window.innerWidth * dpr;
      H = canvas.height = window.innerHeight * dpr;
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";
      ctx.scale(dpr, dpr);
    }
    window.addEventListener('resize', resize);
    resize();

    // Track mouse
    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });
    // Reset mouse when leaving window so particles don't get stuck
    document.addEventListener('mouseleave', () => { mouse.x = -100; mouse.y = -100; });

    const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

    // Config based on device
    const isMobile = window.innerWidth < 600;
    const PARTICLE_COUNT = isMobile ? 25 : 55; // Fewer on mobile for perf
    const CONNECT_DIST = isMobile ? 110 : 160;   // Connect distance
    const MOUSE_DIST = 180;                      // Mouse interaction radius

    class Particle {
      constructor() {
        this.restart(true);
      }

      restart(randomY = false) {
        this.x = Math.random() * window.innerWidth;
        this.y = randomY ? Math.random() * window.innerHeight : -10;
        this.vx = (Math.random() - 0.5) * 0.8;
        this.vy = (Math.random() * 0.5) + 0.2; // Always fall down slowly
        this.size = Math.random() * 2 + 1;
      }

      update() {
        // Standard movement
        this.x += this.vx;
        this.y += this.vy;

        // Mouse interaction (repulsion)
        const dx = mouse.x - this.x;
        const dy = mouse.y - this.y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < MOUSE_DIST) {
          const force = (MOUSE_DIST - dist) / MOUSE_DIST;
          const angle = Math.atan2(dy, dx);
          const push = force * 2; // Strength
          this.x -= Math.cos(angle) * push;
          this.y -= Math.sin(angle) * push;
        }

        // Wrap around
        if (this.x < -50) this.x = window.innerWidth + 50;
        if (this.x > window.innerWidth + 50) this.x = -50;
        if (this.y > window.innerHeight + 50) this.restart(false);
      }

      draw(col) {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = col;
        ctx.fill();
      }
    }

    const particles = Array.from({ length: PARTICLE_COUNT }, () => new Particle());

    function loop() {
      if (prefersReduced) return;
      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      const isDark = root.getAttribute('data-theme') === 'dark';
      // Colors
      const dotCol = isDark ? 'rgba(255,255,255,0.2)' : 'rgba(94,83,67,0.15)';
      const lineCol = isDark ? '255,255,255' : '94,83,67'; // RGB values for line alpha manipulation

      // Update & Draw Dots
      particles.forEach(p => {
        p.update();
        p.draw(dotCol);
      });

      // Draw Lines
      ctx.lineWidth = 0.5;
      for (let i = 0; i < particles.length; i++) {
        for (let j = i + 1; j < particles.length; j++) {
          const p1 = particles[i];
          const p2 = particles[j];
          const dx = p1.x - p2.x;
          const dy = p1.y - p2.y;
          const dist = Math.sqrt(dx * dx + dy * dy);

          if (dist < CONNECT_DIST) {
            const alpha = 1 - (dist / CONNECT_DIST);
            ctx.beginPath();
            ctx.strokeStyle = `rgba(${lineCol}, ${alpha * 0.15})`; // Very subtle lines
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.stroke();
          }
        }
      }

      requestAnimationFrame(loop);
    }
    loop();
  </script>
</body>

</html>
